# Archiviation (work-in-progress)

A way to publish text with GitHub Pages without allowing everyone to read.

Note: This software does not have a stable version yet.

## Explain Like You Are A Developer

Archiviation encrypts your text files with AES. The AES key is derived from the master key and the filename. The master key is automatically generated during initialization.

A file can be accessed online with a URL like `https://username.github.io/?key=${__AES_KEY__}&file=${__FILE_NAME__}`, after you push the repository to GitHub Pages (or any other web server). The identifier consists of the 64-character-long AES encryption key and the filename hash. The page will load the file with XMLHttpRequest from `https://username.github.io/db/${__FILE_NAME__}`. So you do not have to worry about the sensitivity of file names; the URL itself cannot be used to infer the filename.

`__AES_KEY__` is generated by:

```javascript
SHA256(
    config.masterKey +
    'dASz+r+L1GvOUAKrcy9x5q7lXOL/aD7gRLcczwmXJ0iRUtuFEVkeR/UCkkl8LIU1tDzIhCLbePtYdxO70+ligfNziZ98PimpLU8a3NDWrhRsWL46Jlch8piGFaIVl9xhIts2prYs2oMJrsandWjvcss44O+Qjtxm7ZP8ssx9rmw=' +
    articleFileName_raw
).toString('Base64').replace(/[+/=]/g, '')
```

`__FILE_NAME__` is generated by:

```javascript
SHA256(
    '9cfbf34fc443455baf19c27f692ecc76|' +
    SHA256(config.masterKey.slice(0, 32)).toString('Base64') +
    articleFileName_raw
).toString('Base64').replace(/\=/g, '').replace(/\+/g, '-').replace(/\//g, '_')
```

This approach should probably be cryptographically strong enough. Probably!

## Use

### Dependencies

- `node`
- `npm`

### Installation

Install through NPM:

```
$ npm install -g archiviation
```

If NPM is not available:

```
$ git clone https://github.com/neruthes/archiviation.git
$ cd archiviation
$ npm install .
$ npm link
```

### Initialization

Get inside a directory which you would like to store your project.

```
$ archiviation init
$ archiviation build
$ cat docs-index.txt
```

### Configuration

All information you are able to configure is in `/archiviation-config.json`.

### Management

You may add plaintext files in `/source-articles`.

### Publishing

You are supposed to `git init` in `/html`.

## Copyright

Author: Neruthes (a.k.a. J.N.)

License: AGPL.
